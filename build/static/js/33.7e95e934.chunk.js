(this["webpackJsonptu-experto-lega-admin"]=this["webpackJsonptu-experto-lega-admin"]||[]).push([[33],{560:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(15),i=s(534),l=s(90),n=s(558),r=s(1);var o=e=>{let{room:t}=e;return Object(r.jsxs)("div",{className:"room-header",children:[Object(r.jsx)(n.a,{size:"large",children:"NO"}),Object(r.jsxs)("div",{className:"chat-list-info",children:[Object(r.jsx)("h3",{children:t.first_name+" "+t.last_name}),Object(r.jsx)("p",{children:"En linea"})]})]})},j=s(554),d=s(535),m=s(146),b=s(587);var h=e=>{let{socket:t,room:s}=e;const[a]=j.a.useForm();return Object(r.jsx)("div",{className:"room-input",children:Object(r.jsxs)(j.a,{layout:"vertical",form:a,onFinish:e=>{""!=e.message&&e.message&&(t.emit("MESSAGE",s.room,"ADMIN",e.message),a.resetFields())},children:[Object(r.jsx)(j.a.Item,{name:"message",id:"message",children:Object(r.jsx)(d.a,{placeholder:"Escribe un mensaje",type:"text",autoComplete:"off"})}),Object(r.jsx)(m.a,{htmlType:"submit",children:Object(r.jsx)(b.a,{})})]})})};var u=e=>{let{rooms:t,setRoom:s}=e;const a=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return Object(r.jsx)("div",{className:"room-list",children:Object(r.jsx)("ul",{children:t.map(((e,t)=>Object(r.jsxs)("li",{onClick:()=>{s(e)},children:[Object(r.jsx)(n.a,{size:"large",style:{backgroundColor:a[Math.floor(Math.random()*a.length)],verticalAlign:"middle"},children:e.first_name.split(" ")[0].substring(0,2).toUpperCase()}),Object(r.jsxs)("div",{className:"chat-list-info",children:[Object(r.jsx)("h3",{children:e.first_name.split(" ")[0]+" "+e.last_name.split(" ")[0]}),Object(r.jsx)("p",{children:e.message[e.message.length-1].content})]})]},t)))})})};var O=e=>{let{room:t,messages:s,messagesEndRef:a}=e;return Object(r.jsx)("div",{className:"room-messages",children:Object(r.jsxs)("ul",{children:[s.map(((e,s)=>Object(r.jsx)("li",{className:"burbuje"+("ADMIN"==e.owner_id?" me":" other"),children:Object(r.jsxs)("div",{children:[e.content,Object(r.jsxs)("span",{children:["CLIENT"==e.owner_id?t.first_name:" Tu experto legal"," - 11:00"]})]})},s))),Object(r.jsx)("div",{ref:a})]})})},x=s(583);t.default=()=>{const e=Object(a.useRef)(null),[t,s]=Object(a.useState)(),[n,j]=Object(a.useState)([]),[d,m]=Object(a.useState)([]),b=Object(i.a)("https://api.tustramitess.xyz");b.emit("ROOM_JOIN","ADMIN"),b.on("ROOM_LIST",(e=>{j([...n,e])})),b.on("NEW_MESSAGE",(t=>{const s=[...n]||!1;s.forEach(((a,c)=>{if(a.room==t.room){let i=t.messages;a.message=i,s[c]=t,j(s),m(s[c].message||[]),e.current.scrollIntoView({behavior:"smooth"})}}))}));return Object(a.useEffect)((()=>{(async()=>{const t=await c.a.get("/api/chat");200==t.status&&t.data.length>0&&(console.log(t.data),j(t.data),s(t.data[0]),m(t.data[0].message),e.current.scrollIntoView({behavior:"smooth"}))})()}),[]),Object(r.jsx)(l.a,{children:Object(r.jsxs)("div",{className:"header-page",children:[Object(r.jsx)("h1",{children:"Solicitudes de chat"}),n.length>0?Object(r.jsxs)("div",{className:"chat card",children:[Object(r.jsx)(u,{rooms:n,setRoom:e=>{s(e),m(e.message)}}),t&&Object(r.jsxs)("div",{className:"room",children:[Object(r.jsx)(o,{room:t}),Object(r.jsx)(O,{room:t,messages:d,messagesEndRef:e}),Object(r.jsx)(h,{socket:b,room:t,messages:d,setMessages:m})]})]}):Object(r.jsx)("div",{className:"chat card",children:Object(r.jsxs)("div",{className:"chat-empty",children:[Object(r.jsx)(x.a,{}),Object(r.jsx)("h2",{children:"No Hay solicitudes de chat"})]})})]})})}},88:function(e,t,s){"use strict";var a=s(0),c=s(536),i=s(15),l=s(554),n=s(146),r=s(535),o=s(539),j=s(552),d=s(99),m=s(1);t.a=e=>{let{user:t,data:s,setData:b,callback:h}=e;const[u]=l.a.useForm(),[O,x]=Object(a.useState)([]),p=()=>{const e=new FormData;t?(O.length>0&&e.append("image",O[0].originFileObj),e.append("user",JSON.stringify({first_name:u.getFieldValue("first_name"),last_name:u.getFieldValue("last_name"),email:u.getFieldValue("email"),password:u.getFieldValue("password"),role:u.getFieldValue("role"),url_image:""})),i.a.put("/api/user/"+(t._id?t._id:t.id),e).then((e=>{b(null),h(t._id?t._id:t.id)}))):(O.length>0&&e.append("image",O[0].originFileObj),e.append("user",JSON.stringify({first_name:u.getFieldValue("first_name"),last_name:u.getFieldValue("last_name"),email:u.getFieldValue("email"),password:u.getFieldValue("password"),role:u.getFieldValue("role"),url_image:""})),i.a.post("/api/user",e).then((e=>{b(null),h()})))},g=()=>{b(null)};return Object(a.useEffect)((()=>{if(u.resetFields(),t){let e={first_name:t.first_name,last_name:t.last_name,password:t.password,email:t.email,role:t.role};if(u.setFieldsValue(e),t.url_image){let e=t.url_image;x([{uid:"-1",name:"load.png",status:"done",url:e,thumbUrl:e}])}}else x([])}),[t,s]),Object(m.jsx)(c.a,{visible:s,title:"Informaci\xf3n del usuario",onOk:p,onCancel:g,forceRender:!0,maskClosable:!1,footer:[Object(m.jsx)(n.a,{onClick:g,children:"Cancelar"},"back"),Object(m.jsx)(n.a,{type:"primary",onClick:p,children:"Guardar"},"submit")],children:Object(m.jsxs)(l.a,{layout:"vertical",form:u,children:[Object(m.jsx)(l.a.Item,{label:"Nombre(s)",name:"first_name",id:"first_name",hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese el (los) nombre(s)!"},{min:4,message:"El (Los) nombre(s) debe(n) tener al menos 3 caracteres!"}],children:Object(m.jsx)(r.a,{})}),Object(m.jsx)(l.a.Item,{label:"Apellidos",name:"last_name",id:"last_name",hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese los apellidos!"},{min:4,message:"Los apellidos deben tener al menos 4 caracteres!"}],children:Object(m.jsx)(r.a,{})}),Object(m.jsx)(l.a.Item,{label:"Correo",name:"email",id:"email",hasFeedback:!0,rules:[{required:!0,type:"email",message:"El valor ingresado no es un correo el\xe9ctronico!"}],children:Object(m.jsx)(r.a,{})}),Object(m.jsx)(l.a.Item,{label:"Contrase\xf1a",name:"password",id:"password",hasFeedback:!0,rules:[{required:!0,message:"Por favor ingrese la contrase\xf1a!"},{min:8,message:"La contrase\xf1a debe tener al menos 8 caracteres!"}],children:Object(m.jsx)(r.a,{type:"password"})}),Object(m.jsx)(l.a.Item,{name:"role",id:"role",label:"Rol",rules:[{required:!0}],children:Object(m.jsxs)(o.a,{placeholder:"Seleccione un rol",allowClear:!0,children:[Object(m.jsx)("option",{value:"ADMINISTRADOR",children:"ADMINISTRADOR"}),Object(m.jsx)("option",{value:"ASESOR LEGAL",children:"ASESOR LEGAL"}),Object(m.jsx)("option",{value:"CALL CENTER",children:"CALL CENTER"})]})}),Object(m.jsx)(d.a,{rotate:!1,aspect:1,modalTitle:"Editar Imagen",children:Object(m.jsx)(j.a,{listType:"picture-card",fileList:O,defaultFileList:[...O],onChange:e=>{x(e.fileList)},children:0==O.length&&"+ Upload"})})]})})}},90:function(e,t,s){"use strict";var a=s(0),c=s(557),i=s(3),l=s(16),n=s(303),r=s.p+"static/media/tutorial.5db87431.pdf",o=s(576),j=s(577),d=s(578),m=s(579),b=s(580),h=s(581),u=s(582),O=s(583),x=s(584),p=s(585),g=s(586),f=s(11),C=s(1);new f.a;const{SubMenu:v}=n.a;var I=()=>{const e=Object(i.g)(),{user:t}=Object(a.useContext)(l.a);return Object(C.jsxs)("div",{className:"drawer",children:[Object(C.jsx)("div",{className:"drawer-logo",children:Object(C.jsx)("img",{src:"/assets/logo/logo-white.svg"})}),Object(C.jsx)("nav",{children:Object(C.jsx)(C.Fragment,{children:t&&"ADMINISTRADOR"===t.role?Object(C.jsxs)(n.a,{mode:"inline",defaultSelectedKeys:[e.location.pathname],defaultOpenKeys:[e.location.pathname.split("/")[1]],style:{height:"100%",borderRight:0},children:[Object(C.jsx)("div",{className:"menu-title",children:Object(C.jsx)("p",{children:"PANEL DE CONTROL"})}),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(o.a,{}),children:"Inicio"},"/"),Object(C.jsx)("div",{className:"menu-title",children:Object(C.jsx)("p",{children:"TR\xc1MITES"})}),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(j.a,{}),onClick:()=>e.push("/"),children:"Mis tr\xe1mites"},"10"),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(d.a,{}),onClick:()=>e.push("/notary"),children:"Notarias"},"/notary"),Object(C.jsxs)(v,{icon:Object(C.jsx)(m.a,{}),title:"Actos Notariales",children:[Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/notarial-act/view"),children:"\xb7 Lista de Actos Notariales"},"/notarial-act/view"),Object(C.jsxs)(v,{icon:Object(C.jsx)(m.a,{}),title:"Creaci\xf3n Acto Notarial",children:[Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/notarial-act/category"),children:"1\xb7 Categor\xedas"},"/notarial-act/category"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/notarial-act/actor"),children:"2\xb7 Actores"},"/notarial-act/actor"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/notarial-act/input"),children:"3\xb7 Campos Formularios"},"/notarial-act/input"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/notarial-act/form"),children:"4\xb7 Nuevo Acto Notarial"},"/notarial-act/form")]},"seb-notarial-act"),Object(C.jsxs)(n.a.Item,{children:[Object(C.jsx)("a",{href:r,target:"_blank"}),"\xbfNecesitas ayuda?"]},"/notarial-act/tutorial")]},"notarial-act"),Object(C.jsx)("div",{className:"menu-title",children:Object(C.jsx)("p",{children:"CONFIGURACI\xd3N"})}),Object(C.jsxs)(v,{icon:Object(C.jsx)(b.a,{}),title:"Web Site",children:[Object(C.jsxs)(v,{icon:Object(C.jsx)(h.a,{}),title:"Crear Pregunta",children:[Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/categoryquestion"),children:"\xb7 Categor\xedas Pregunta"},"/website/categoryquestion"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/subcategoryquestion"),children:"\xb7 Subcategor\xedas Pregunta"},"/website/subcategoryquestion"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/question"),children:"\xb7 Preguntas frecuentes"},"/website/question")]},"seb-question"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/banner"),children:"\xb7 Banner"},"/website/banner"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/internationalization"),children:"\xb7 Internacionalizaci\xf3n"},"/website/internationalization"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/page"),children:"\xb7 Politicas y tratamiento de datos"},"/website/page"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/contact"),children:"\xb7 Solicitudes de contacto"},"/website/contact"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/comment"),children:"\xb7 Comentarios"},"/website/comment")]},"website"),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(u.a,{}),onClick:()=>e.push("/user"),children:"Usuarios"},"/user"),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(O.a,{}),onClick:()=>e.push("/chatbot"),children:"Chatbot"},"/chatbot"),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(x.a,{}),onClick:()=>e.push("/aditional-config"),children:"Configuraci\xf3n adicional"},"/aditional-config"),Object(C.jsx)(n.a.Item,{icon:Object(C.jsx)(p.a,{}),onClick:()=>e.push("/notification"),children:"Notificaciones"},"/notification"),Object(C.jsx)("div",{className:"menu-title",children:Object(C.jsx)("p",{children:"SOPORTE"})}),Object(C.jsxs)(v,{icon:Object(C.jsx)(g.a,{}),title:"Soporte",children:[Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/support/callme"),children:"\xb7 Solicitudes de llamada"},"/support/callme"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/support/chat"),children:"\xb7 Solicitudes de chat"},"/support/chat")]},"support")]}):Object(C.jsxs)(n.a,{mode:"inline",defaultSelectedKeys:[e.location.pathname],defaultOpenKeys:[e.location.pathname.split("/")[1]],style:{height:"100%",borderRight:0},children:[Object(C.jsx)("div",{className:"menu-title",children:Object(C.jsx)("p",{children:"SOPORTE"})}),Object(C.jsxs)(v,{icon:Object(C.jsx)(g.a,{}),title:"Soporte",children:[Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/website/comment"),children:"\xb7 Comentarios"},"/website/comment"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/support/callme"),children:"\xb7 Solicitudes de llamada"},"/support/callme"),Object(C.jsx)(n.a.Item,{onClick:()=>e.push("/support/chat"),children:"\xb7 Solicitudes de chat"},"/support/chat")]},"support")]})})})]})};var N=e=>{let{openDrawer:t,setOpenDrawer:s}=e;return Object(C.jsx)(c.a,{placement:"left",closable:!1,onClose:()=>{s(!1)},visible:t,children:Object(C.jsx)(I,{})},"right")},w=s(88);const k=new f.a;var S=()=>{const[e,t]=Object(a.useState)(!1),{user:s}=Object(a.useContext)(l.a),[c,i]=Object(a.useState)(),n=()=>{i(null)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(w.a,{user:s,data:c,setData:n,callback:n}),Object(C.jsx)(N,{openDrawer:e,setOpenDrawer:t}),Object(C.jsxs)("header",{children:[Object(C.jsx)("div",{className:"responsive-menu",children:Object(C.jsx)("img",{src:"/assets/icon/menu.svg",onClick:()=>t(!0)})}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)("img",{src:"/assets/icon/notification.svg"})}),Object(C.jsx)("li",{children:Object(C.jsx)("img",{src:"/assets/icon/settings.svg",onClick:()=>(k.remove("token"),void(window.location.href="/login"))})}),Object(C.jsx)("li",{children:Object(C.jsx)("img",{className:"profile",src:"/assets/icon/user_3.svg",onClick:()=>{i({user:s})}})})]})]})]})},_=s(18);t.a=e=>{let{children:t,loader:s=!1}=e;return Object(C.jsxs)(C.Fragment,{children:[s&&Object(C.jsx)(_.a,{type:"loader"}),Object(C.jsxs)("div",{className:"layout",children:[Object(C.jsx)(I,{}),Object(C.jsxs)("div",{className:"layout-content",children:[Object(C.jsx)(S,{}),Object(C.jsx)("main",{children:t})]})]})]})}}}]);
//# sourceMappingURL=33.7e95e934.chunk.js.map